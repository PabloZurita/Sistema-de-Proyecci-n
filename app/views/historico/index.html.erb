<%= render 'partials/menu' %>
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/modules/exporting.js"></script>

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="/resources/demos/style.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.css">
  
<script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.js"></script>

<button id="btn_diario_desktop">Ver diario desktop</button>
<button id="btn_diario_mobile">Ver diario mobile</button>
<button id="btn_diario_COL">Ver diario COL</button>
<button id="btn_acumulado_desktop">Ver acumulado desktop</button>
<button id="btn_acumulado_mobile">Ver acumulado mobile</button>
<button id="btn_acumulado_COL">Ver acumulado COL</button>

<script type="text/javascript">
  $(function () {
    var seriesOptions = [],
        seriesCounter = 0,
        names =  ['ISN Contrato','ISN Hibrido','ISN Prepago','ISN Fijo','ISN Pyme Fijo','ISN Pyme Movil','ISN Global Desktop','Canal Online'] ;
    Highcharts.setOptions({
          lang:{
              months: ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'],
              shortMonths: ['Ene','Feb','Mar','Abr','May','Jun','Jul','Ago','Sep','Oct','Nov','Dic'],
              weekdays: ['Domingo','Lunes','Martes','Miércoles','Jueves','Viernes','Sábado'],
              shortWeekdays: ['Dom','Lun','Mar','Mie','Jue','Vie','Sáb'],
              printChart: 'Imprimir gráfico',
              downloadPNG: 'Descargar PNG',
              downloadPDF: 'Descargar PDF',
              downloadJPEG:'Descargar JPEG',
              downloadSVG: 'Descargar SVG'
            }
        });
    /**
     * Create the chart when all data is loaded
     * @returns {undefined}
     */
    function createChart() {
  
        Highcharts.stockChart('grafico', {
          legend: {enabled: true},
          title: {
                text: 'Evolución Histórica ISN acumulado'
            },
            rangeSelector: {
              inputDateFormat: '%e/%b/%Y',
              inputEditDateFormat: '%d/%m/%Y',
              inputEnabled: true,
              selected: 1,
              buttons: [{
                  count: 1,
                  type: 'week',
                  text: '1sem'
              }, {
                  count: 1,
                  type: 'month',
                  text: '1mes'
              }, {
                  count: 6,
                  type: 'month',
                  text: '6mes'
              }, {
                  type: 'all',
                  text: 'Todo'
              }]
            },
            // yAxis: {
            //     labels: {
            //         formatter: function () {
            //             return (this.value > 0 ? ' + ' : '') + this.value + '%';
            //         }
            //     },
            //     plotLines: [{
            //         value: 0,
            //         width: 2,
            //         color: 'silver'
            //     }]
            // },
            plotOptions: {
                series: {
                    //compare: 'percent',
                    showInNavigator: true
                }
            },
            tooltip: {
                //pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
                valueDecimals: 2,
                split: true
            },
            series: seriesOptions
        });
    }
    $.each(names, function (i, name, chart) {
        $.getJSON('https://www.highcharts.com/samples/data/jsonp.php?filename=' + name.toLowerCase() + '-c.json&callback=?',    function (data) {
            seriesOptions[i] = {
               name: name,
                data: <%= @datos_historico_acumulado_COL %>[i]
            };
            seriesCounter += 1;
            if (seriesCounter === names.length) {
               createChart();
           }
        });

          
   });
});
</script>




  <script>
  $( function() {
    var dateFormat = "mm/dd/yy",
      from = $( "#from" )
        .datepicker({
          defaultDate: "+1w",
          changeMonth: true,
          numberOfMonths: 3
        })
        .on( "change", function() {
          to.datepicker( "option", "minDate", getDate( this ) );
        }),
      to = $( "#to" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3
      })
      .on( "change", function() {
        from.datepicker( "option", "maxDate", getDate( this ) );
      });
 
    function getDate( element ) {
      var date;
      try {
        date = $.datepicker.parseDate( dateFormat, element.value );
      } catch( error ) {
        date = null;
      }
 
      return date;
    }
  } );
  </script>



<script>
    $(document).ready(function() {
    $('#tabla').DataTable();
    } );

</script>



<div class="container-fluid container-fullw bg-white">
  <div class="row">
    <div class="col-sm-12">
        <div class="panel panel-white no-radius text-center">
              <div class="panel-body">
          <div id="grafico" style="height: 400px; min-width: 310px"></div>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="container-fluid container-fullw bg-white">
    <div class="row">
        <div class="col-sm-2">
            
        </div>
        <div class="col-sm-8">
            <div class="panel panel-white no-radius text-center">
                <div class="panel-body">
                    <h2> Elegir Datos para Descargar</h2> 
                    <div class="row">
                        <div class="col-sm-6">
                            <label for="from">Fecha Inicio</label>
                            <input type="text" id="from" name="from">
                        </div>
                        <div class="col-sm-6">
                            <label for="to">Fecha Final</label>
                            <input type="text" id="to" name="to">
                        </div>
                    </div>                  
                </div>
            </div>
        </div>
        <div class="col-sm-2">
        </div>
    </div>
</div>



 


<div class="container-fluid container-fullw bg-white">
    <div class="row">
        <div class="col-sm-2">
            
        </div>
        <div class="col-sm-8">
            <div class="panel panel-white no-radius text-center">
                <div class="panel-body">


                <table id="tabla" class="display responsive no-wrap">
                    <thead>
                      <tr role ="row">
                        <th>Id ind diario</th>
                        <th>Segmento</th>
                        <th>Isn</th>
                        <th>Resp 1 2</th>
                        <th>Resp 4 5</th>
                        <th>Resolutividad</th>
                        <th>Fecha</th>
                        <th colspan="3"></th>
                      </tr>
                    </thead>

                    <tbody>
                      <% @indicadoresdiarios.each do |indicadoresdiario| %>
                      <tr>
                        <td><%= indicadoresdiario.id_ind_diario %></td>
                        <td><%= indicadoresdiario.segmento %></td>
                        <td><%= indicadoresdiario.isn %></td>
                        <td><%= indicadoresdiario.resp_1_2 %></td>
                        <td><%= indicadoresdiario.resp_4_5 %></td>
                        <td><%= indicadoresdiario.resolutividad %></td>
                        <td><%= indicadoresdiario.fecha %></td>
                        <td><%= link_to 'Show', indicadoresdiario %></td>
                        <td><%= link_to 'Edit', edit_indicadoresdiario_path(indicadoresdiario) %></td>
                        <td><%= link_to 'Destroy', indicadoresdiario, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                      </tr>
                      <% end %>
                    </tbody>
                  </table>




                </div>
            </div>
        </div>
        <div class="col-sm-2">
        </div>
    </div>
</div>

 